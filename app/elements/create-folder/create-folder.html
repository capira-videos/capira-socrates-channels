<dom-module id="create-folder">
  <style>
    :host {
      display: block;
    }

    #createFolderDialog {
      width: 400px;
    }
  </style>
  <template>
    <paper-dialog id="createFolderDialog" with-backdrop entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>
      <h2>Create Folder</h2>
      <p>
        <paper-input label="Enter the title" value="{{item.title}}" autofocus></paper-input>
      </p>
      <div class="buttons">
        <paper-button dialog-dismiss>Decline</paper-button>
        <paper-button on-click="_confirm">Accept</paper-button>
      </div>
    </paper-dialog>
    <editor-service id="createFolderService" on-responded="_handleResponse"></editor-service>
  </template>
</dom-module>
<script>
  (function() {
    Polymer({
      is: 'create-folder',

      open: function() {
        this.$.createFolderDialog.open();
        this.item = {
          title: '',
          parent: this.parent
        };
      },
      _confirm: function() {
        var service = this.$.createFolderService;
        service.generateRequest('folder', this.item, 'PUT');
      },

      _handleResponse: function(resp) {
        var folder = resp.detail;
        console.log("Response:", folder);
        this.fire('created', folder);
        this.$.createFolderDialog.close();
      }

    });
  })();
</script>
