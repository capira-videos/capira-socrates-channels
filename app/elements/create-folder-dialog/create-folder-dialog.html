<dom-module id="create-folder-dialog">
  <style>
    #createFolderDialog {
      width: 400px;
    }
  </style>
  <template>
    <paper-dialog id="createFolderDialog" with-backdrop entry-animation="scale-up-animation" exit-animation="fade-out-animation" with-backdrop>
      <h2>Create Folder</h2>
      <p>
        <paper-input label="Enter a title for the new channel" value="{{folder.title}}" autofocus required></paper-input>
      </p>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button on-click="_confirm">Create</paper-button>
      </div>
    </paper-dialog>
    <channel-editor-service id="createFolderService" on-responded="_confirmed"></channel-editor-service>
  </template>
</dom-module>
<script>
  (function() {
    Polymer({
      is: 'create-folder-dialog',

      open: function() {
        this.$.createFolderDialog.open();
        this.folder = {
          title: '',
          parent: this.parentId
        };
      },

      _confirm: function() {
        var that=this;
        app.editorService.generateRequest('folder', this.folder, 'PUT').then(function(req){
          var folder = req.response;
          that.fire('created', folder);
          that.$.createFolderDialog.close();
        });
      }
    });
  })();
</script>
